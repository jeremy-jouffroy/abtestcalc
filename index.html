<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="version" content="2.1.0">
    <meta name="build-date" content="2026-01-15">
    <meta name="description" content="A/B Test Calculator with Frequentist and Bayesian statistical analysis">
    <meta name="author" content="jeremy-jouffroy">
    <title>A/B Test Calculator - Plan, Analyze & Optimize</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>A/B Test Calculator</h1>
            <p class="subtitle">Plan, analyze, and optimize your experiments with statistical confidence</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" data-tab="sample-size">Sample Size Calculator</button>
            <button class="tab-button" data-tab="analyze">Analyze Test Results</button>
        </div>

        <!-- Sample Size Calculator Tab -->
        <div id="sample-size" class="tab-content active">
            <h2>Calculate Required Sample Size</h2>
            <p class="description">Determine how many visitors you need and how long your test should run.</p>

            <div class="calculator-grid">
                <div class="input-group">
                    <label for="baseline-conv">
                        Baseline Conversion Rate (%)
                        <span class="tooltip">Your current conversion rate before any changes.<br><br><strong>Example:</strong> If 50 out of 1,000 visitors convert, your baseline is 5%.</span>
                    </label>
                    <input type="number" id="baseline-conv" step="0.01" min="0" max="100" value="5">
                    <span class="help-text">Your current conversion rate</span>
                </div>

                <div class="input-group">
                    <label for="mde">
                        Minimum Detectable Effect (%)
                        <span class="tooltip">The smallest improvement your test can reliably detect with your available traffic.<br><br><strong>Example:</strong> If your baseline is 3% and MDE is 15%, your test will only detect changes that shift conversion to at least 3.45% (3% Ã— 1.15) â€” smaller gains will be invisible, even if real.</span>
                    </label>
                    <input type="number" id="mde" step="1" min="1" max="100" value="2">
                    <span class="help-text">Smallest improvement worth detecting (relative)</span>
                </div>

                <div class="input-group">
                    <label for="confidence">
                        Confidence Level
                        <span class="tooltip">The probability that you won't declare a winner when there's no real difference (avoids false positives).<br><br><strong>Example:</strong> 95% confidence means only 5% chance of falsely claiming a winner when variants are actually equal.</span>
                    </label>
                    <select id="confidence">
                        <option value="0.90">90%</option>
                        <option value="0.95" selected>95%</option>
                        <option value="0.99">99%</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="power">
                        Statistical Power
                        <span class="tooltip">The probability that you'll detect a real difference when it exists (avoids false negatives).<br><br><strong>Example:</strong> 80% power means 20% chance of missing a real improvement and incorrectly keeping your original version.</span>
                    </label>
                    <select id="power">
                        <option value="0.70">70%</option>
                        <option value="0.80" selected>80%</option>
                        <option value="0.90">90%</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="variants">
                        Number of Variants
                        <span class="tooltip">Total number of versions you're testing, including the control.<br><br><strong>Example:</strong> Testing your original page (A) against 2 new designs (B and C) = 3 variants total.</span>
                    </label>
                    <input type="number" id="variants" min="2" max="10" value="2">
                    <span class="help-text">Including control (minimum 2)</span>
                </div>

                <div class="input-group">
                    <label for="daily-traffic">
                        Daily Traffic
                        <span class="tooltip">Average number of visitors per day to the page you're testing.<br><br><strong>Example:</strong> If your landing page gets 500 visits on weekdays and 800 on weekends, your average is about 600/day.</span>
                    </label>
                    <input type="number" id="daily-traffic" min="1" value="10000">
                    <span class="help-text">Average visitors per day</span>
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateSampleSize()">Calculate Sample Size</button>

            <div id="sample-results" class="results-box" style="display: none;">
                <h3>Results</h3>
                <div class="result-grid">
                    <div class="result-item">
                        <span class="result-label">Sample Size per Variant:</span>
                        <span class="result-value" id="sample-per-variant">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Sample Size:</span>
                        <span class="result-value" id="total-sample">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Estimated Duration:</span>
                        <span class="result-value" id="duration">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Expected Variant Conversion:</span>
                        <span class="result-value" id="expected-variant-conv">-</span>
                    </div>
                </div>

                <div class="recommendations">
                    <h3>Recommendations for Launching a Test</h3>
                    <div class="recommendation-list">
                        <div class="recommendation-item" id="rec-visitors">
                            <span class="rec-icon">-</span>
                            <span class="rec-text">Minimum of 5,000 visitors per variant</span>
                        </div>
                        <div class="recommendation-item" id="rec-min-duration">
                            <span class="rec-icon">-</span>
                            <span class="rec-text">Minimum test duration of 14 days</span>
                        </div>
                        <div class="recommendation-item" id="rec-max-duration">
                            <span class="rec-icon">-</span>
                            <span class="rec-text">Do not exceed 42 days of testing</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analyze Test Results Tab -->
        <div id="analyze" class="tab-content">
            <h2>Analyze Your A/B Test Results</h2>
            <p class="description">Evaluate statistical significance using both Frequentist and Bayesian approaches.</p>

            <div class="method-selector">
                <div class="method-selector-header">
                    <span class="method-title">Statistical Method</span>
                    <span class="tooltip method-tooltip">Choose your analysis approach:<br><br><strong>Frequentist:</strong> Traditional hypothesis testing with p-values. Tells you if results are "statistically significant" (p < 0.05). Good for binary decisions.<br><br><strong>Bayesian:</strong> Calculates probability that one variant is better. Provides probability statements (e.g., "95% chance B beats A"). Better for understanding magnitude of difference and making business decisions.</span>
                </div>
                <label class="method-label">
                    <input type="radio" name="method" value="frequentist" checked>
                    <span>Frequentist (p-value, confidence intervals)</span>
                </label>
                <label class="method-label">
                    <input type="radio" name="method" value="bayesian">
                    <span>Bayesian (probability of being best, credible intervals)</span>
                </label>
            </div>

            <div class="variants-container" id="variants-container">
                <div class="variant-input control-variant">
                    <h3>Control (A)</h3>
                    <div class="input-group">
                        <label for="control-visitors">Visitors</label>
                        <input type="number" class="variant-visitors-input" data-variant="control" min="0" value="10000">
                    </div>
                    <div class="input-group">
                        <label for="control-conversions">Conversions</label>
                        <input type="number" class="variant-conversions-input" data-variant="control" min="0" value="500">
                    </div>
                    <div class="conversion-rate">
                        <span>Conversion Rate: <strong class="variant-rate-display" data-variant="control">5.00%</strong></span>
                    </div>
                </div>

                <div class="variant-input test-variant" data-variant-id="1">
                    <div class="variant-header">
                        <h3>Variant B</h3>
                    </div>
                    <div class="input-group">
                        <label>Visitors</label>
                        <input type="number" class="variant-visitors-input" data-variant="1" min="0" value="10000">
                    </div>
                    <div class="input-group">
                        <label>Conversions</label>
                        <input type="number" class="variant-conversions-input" data-variant="1" min="0" value="550">
                    </div>
                    <div class="conversion-rate">
                        <span>Conversion Rate: <strong class="variant-rate-display" data-variant="1">5.50%</strong></span>
                    </div>
                </div>
            </div>

            <div class="variant-controls">
                <button class="add-variant-btn" onclick="addVariant()" id="add-variant-btn">+ Add Variant</button>
                <span class="variant-count-text">Testing <strong id="variant-count">2</strong> variants (max 5)</span>
            </div>

            <!-- Bayesian-specific inputs -->
            <div id="bayesian-inputs" class="bayesian-section" style="display: none;">
                <div class="bayesian-header">
                    <h3>Bayesian Priors (Optional)</h3>
                    <span class="tooltip bayesian-main-tooltip">Priors represent your beliefs before seeing the data. Default values (Î±=1, Î²=1) represent no prior knowledge (uniform prior).<br><br><strong>When to adjust:</strong> If you have historical data or strong beliefs about conversion rates, you can encode that knowledge here. For most cases, leave defaults.</span>
                </div>
                <p class="help-text">Leave default for non-informative priors</p>

                <div class="calculator-grid">
                    <div class="input-group">
                        <label for="prior-alpha">
                            Prior Alpha (Î±)
                            <span class="tooltip-icon">ðŸ¤”</span>
                            <span class="tooltip">Number of prior "successes" in your belief. Higher values mean you believe conversion rate is higher.<br><br><strong>Example:</strong> If historically you've seen 10 conversions out of 100 visitors, you might use Î±=10. Default Î±=1 means no strong prior belief.</span>
                        </label>
                        <input type="number" id="prior-alpha" step="0.1" min="0.1" value="1">
                        <span class="help-text">Success parameter</span>
                    </div>
                    <div class="input-group">
                        <label for="prior-beta">
                            Prior Beta (Î²)
                            <span class="tooltip-icon">ðŸ¤”</span>
                            <span class="tooltip">Number of prior "failures" in your belief. Higher values mean you believe conversion rate is lower.<br><br><strong>Example:</strong> If historically you've seen 90 non-conversions out of 100 visitors, you might use Î²=90. Default Î²=1 means no strong prior belief.</span>
                        </label>
                        <input type="number" id="prior-beta" step="0.1" min="0.1" value="1">
                        <span class="help-text">Failure parameter</span>
                    </div>
                    <div class="input-group">
                        <label for="monte-carlo-samples">
                            Monte Carlo Samples
                            <span class="tooltip-icon">ðŸ¤”</span>
                            <span class="tooltip">Number of random samples used to calculate probabilities. More samples = more accurate results but slower.<br><br><strong>Example:</strong> 100,000 samples (default) is accurate for most cases. Use 1,000,000 for very precise results or when probabilities are close to 50%.</span>
                        </label>
                        <input type="number" id="monte-carlo-samples" min="1000" max="1000000" step="1000" value="100000">
                        <span class="help-text">Higher = more accurate</span>
                    </div>
                </div>
            </div>

            <button class="calculate-btn" onclick="analyzeTest()">Analyze Results</button>

            <div id="analysis-results" class="results-box" style="display: none;">
                <div class="analysis-header">
                    <h3 id="analyzed-variant-title">Analyzing Best Performer</h3>
                </div>
                <!-- Frequentist Results -->
                <div id="frequentist-results">
                    <h3>Frequentist Analysis</h3>
                    <div class="result-grid">
                        <div class="result-item">
                            <span class="result-label">Relative Uplift:</span>
                            <span class="result-value" id="uplift">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Absolute Difference:</span>
                            <span class="result-value" id="abs-diff">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">P-Value:</span>
                            <span class="result-value" id="p-value">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Z-Score:</span>
                            <span class="result-value" id="z-score">-</span>
                        </div>
                        <div class="result-item full-width">
                            <span class="result-label">95% Confidence Interval:</span>
                            <span class="result-value" id="conf-interval">-</span>
                        </div>
                    </div>
                    <div class="verdict" id="verdict">-</div>
                </div>

                <!-- Bayesian Results -->
                <div id="bayesian-results" style="display: none;">
                    <h3>Bayesian Analysis</h3>
                    <div class="result-grid">
                        <div class="result-item">
                            <span class="result-label">Probability B Beats A:</span>
                            <span class="result-value" id="prob-b-beats-a">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Expected Loss (choosing A):</span>
                            <span class="result-value" id="expected-loss-a">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Expected Loss (choosing B):</span>
                            <span class="result-value" id="expected-loss-b">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Relative Uplift (Median):</span>
                            <span class="result-value" id="bayes-uplift">-</span>
                        </div>
                        <div class="result-item full-width">
                            <span class="result-label">95% Credible Interval:</span>
                            <span class="result-value" id="credible-interval">-</span>
                        </div>
                    </div>
                    <div class="verdict" id="bayes-verdict">-</div>
                </div>
            </div>
        </div>

        <footer>
            <p>This calculator uses both Frequentist and Bayesian statistical methods for robust A/B test analysis.</p>
            <p class="warning">âš  Warning: Do not "peek" at results before reaching your planned sample size, as this increases false positive rates.</p>
            <p class="version-info">Version 2.1.0 | Build Date: 2026-01-15</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
